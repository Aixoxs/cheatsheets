# Покажите на примере, что необходимо сделать, чтобы определённую в одном файле функцию вызвать в другом.

```asm
%include "file.asm"
extern func
```

# Опишите алгоритм работы push.

1. rsp умельшается на размер параметра (2, 4 или 8 байт)
2. по адресу из регистра rsp записывается значение 

# Может ли программа работать без стека? Объясните ответ.

Нет. При вызове функций в стек копируется адрес возврата, помещаются регистры, которые используются в данной подпрограмме. 

# Как передать в процедуру больше шести аргументов?

Можно передавать подпрограмме требуемые параметры через стек. Подпрограмма, зная, в каком порядке помещены в стек параметры, может забрать их оттуда и использовать при своем выполнении.

# Что такое memory mapping?

__Memory mapping__ - это "отображение", установление соответствия между физической памятью/фальлами/устройстами и регионами виртуальной памяти.

Используется когда загрузчик заполняет адресное пространство процесса, когда процессор просит у ОС дополнительные страницы, когда ОС отображает файлы с носителя в адресное пространство.

Таким образом, системный вызов `mmap` используется для динамического выделения памяти и отображения в память файлов и устройств. 

# Что делает препроцессор?

Препроцессор - программа, подготавливающая код программы.

В nasm директивы для препроцессинга начинаются с `%`.
Препроцессор nasm осуществляет _макроподстановку (инстанцирование)_ с параметрами и без, кроме того он может осуществлять операции над строками (конкатенация строк, длинна). 

# В чем отличие директив `%macro` и `%define` ?

`%define` используют для задания констант.

`%macro` многострочный макрос с параметрами.

# Что делает команда jb?

`jb` - переход, если CF=1.

# Что такое секции объектного файла?

Секции - части программы на ассемблере, которые имеют свое логическое предназначение.

Например, в секции `.text` находятся инструкции(есть права на выполнение), в `.data` - глобыльные данные (есть права на чтиние и запись). Кроме того существуют секции для отладчика, секции с данными только для чтения и др.

# Что такое caller-saved и callee-saved регистры?

caller-saved - регистры, которые используется для хранения временных переменных, которые не должны быть сохранены между вызовами, процедура эти регистры может изменить.

callee-saved - регистры, которые используется для хранения долговременных значений, а значит должны сохраняться вызыванной процедурой и процедура не имеет права по завершению выполнения оставлять эти регистры в измененном состояние. (rbx, rbp, rsp, r12-r15)

# Какие команды, кроме push и pop, используют стек? Назовите хотя бы две.

call и ret

При вызове функции в стеке храниться адрес возврата  

# В чем отличие директивы и ассемблерной команды?

Директива (псевдокоманда) - команды для ассемблера (а не для процессора), например, выделить немного памяти или выдать новую страницу листинга. Директивы действуют только в процессе ассемблирования программы и не генерируют машинных кодов.

Команда указывает транслятору, какое действие должен выполнить микропроцессор.

# Что делает команда idiv?

`idiv` - производит целочисленное деление с остатком знаковых целочисленных операндов (для отрицательных значений должен использоваться дополнительный код). 

# Что такое нуль-терминированные строки?

строки, оканчивающиеся `\0`.

# Что хранит регистр rsp?

адрес вершины стека.

# Какие регистры изменятся после выполнения команды syscall?

В rax будет содержаться возвращаемое значение.

Перезапишутся rcx и r11. (вроде) 

# Что делает компоновщик?

Собирает релоцируемые объектные файлы в один исполняемый. 

Для этого компановщик выполняет __релокацию__  (привязывание адресов к различным частям программы, чтобы ссылки на эти части были правильными) и разрешение символов (расстановка правильных адресов символов).

# Что такое big endian/little endian?

Big endian - порядок байт многобайтового числа, когда число храниться в прямом порядке (от старших байт)

Little endian - в обратном порядке (от младших). 

# Что такое GDT?

GDT (Global Descriptor Table, глобальная таблица дескрипторов) — служебная структура данных в архитектуре x86, определяющая глобальные (общие для всех задач) сегменты.

# Что такое дескриптор?

Дескриптор - абстрактный индикатор, используемый для доступа к файлу (или другому ресурсу ввода/вывода).

`0  - stdin`
`1 - stdout`
`2 - stderr`

# Перечислите 8-разрядные регистры общего назначения

`rax` - "аккумулятор"

`rbx` - "base register" (ранее использовался для базовой адресации)

`rsx` - для организации циклов

`rdx` - хранит данные при операциях ввода-вывода

`rsp` - адрес вершины стека

`rbp` - адрес начала текущаего стекового фрейма

`rsi` - адрес начала строки-источника

`rdi` - адрес начала строки-получателя

# Что делает команда movq?

копирует 64 разряда из операнда-источника в операнд-назначение

# Какие логические области памяти обычно содержит любая программа?

Область с данными (чтение, запись) и область с кодом (выполнение) 

(сегмент .data и .text)

# Что такое канонический адрес?

# В скомпилированных программах в месте, где логично было бы очищать регистр rax, вместо этого используется команда xor eax, eax. Почему xor и почему только половина, eax?

# Какие отличия чистой архитектуры фон Неймана от архитектуры типичного современного процессора вы можете назвать?

# Какие регистры должен установить загрузчик перед началом выполнения программы? Объясните, почему именно их.

# Напишите функцию на ассемблере, которая примет две строки и перемешает их содержимое. Например, “abc” и “def” => “adbecf”.

# Напишите функцию на ассемблере, которая примет строку и подсчитает количество пропусков в ней, состоящих из пробелов или табуляции (вперемешку).

# Можно ли написать программу, где свойство локальности будет нарушено?

# Как ОС понимает, что страница, на которую произошло обращение, вытеснена из ОП?

# Напишите функцию на ассемблере, которая примет строку и подсчитает количество слов в ней из более, чем трёх букв.

# Напишите функцию на ассемблере, которая примет строку, указатель на буфер в памяти и символ. Она заполнит буфер содержимым строки, перемежая символы строки своим третьим аргументом. Например, для строки “abc” и символа “x” результат “axbxcx”.

# Сколько таблиц релокации есть в объектном файле?

# Как с помощью команды lea умножить содержимое rax на 9 в одну команду?

# Чему равны старшие биты rax после инструкции mov eax, aah.

# Подробно опишите процесс трансляции виртуального адреса в физический.

# Напишите функцию на ассемблере, которая примет строку и подсчитает количество слов в ней из более, чем трёх букв.

# Напишите функцию на ассемблере, которая примет строку, указатель на буфер в памяти и символ. Она заполнит буфер содержимым строки, пропуская символы, соответствующие её третьему аргументу. Например, для строки “abc” и символа “b” результат “ac”.

# Подробно опишите алгоритм работы инструкции syscall.

# Нарисуйте и закодируйте на ассемблере конечный автомат, который проверяет входную строчку и отвечает, содержит ли она ровно одно слово и одно число. Слова состоят только из символов [a-z], разделены только одинарными пробелами. Число целое. Макрос get_symbol используется, чтобы положить в ch следующий символ.

# Напишите функцию на ассемблере, которая примет строку, указатель на буфер в памяти и символ. Она заполнит буфер содержимым строки, пропуская символы, соответствующие её третьему аргументу. Например, для строки “abc” и символа “b” результат “ac”.

# Напишите функцию на ассемблере, которая примет строку и подсчитает количество пропусков в ней, состоящих из пробелов или табуляции (вперемешку).

#  Для чего разные DPL в дескрипторах сегментов данных и кода

#  Напишите функцию на ассемблере, которая примет строку и два символа. Она должна произвести текстовую замену первого символа на второй.

# В чем отличие команд mov и lea?

# Как виртуальная память помогает организации многозадачности?

# Что произойдет, если мы сделаем push меньше раз, чем pop?

# Что такое виртуальная память?

# Что такое таблица ASCII?

# Какой размер имеют регистры BL, DH, CX? В чем связь между ними?

# Какие регистры должен установить загрузчик перед началом программы? Объясните, почему именно их.

# Напишите функцию на ассемблере, которая принимает строку и 2 символа. Она должнв произвести текстовую замену первтого символа на второй.

# Нарисуйте и закадируйте на ассемблере конечный автомат,который проверяет входную строчку и отвечает, содержит ли она ровно 2 слова, а за ним число. Слова состоят только из символов [a-z], разделены только одинарными пробелами. Макрос get_simbol кладет в ah следующий символ.

# Почему в этом макросе все вхождения параметров взяты в скобки? Придумайте пример, когда это играет роль.
`# define MIN(a,b) ((a)>(b))?(a):(b)`

# Напишите функцию на C, которая примет указатель на массив чисел типа int и его размер, и заполнит его числами Фибоначчи. Числа Фибоначчи образуют последовательность: 1, 1, 2, 3, 5, 8, ... (каждый следующий элемент – сумма двух предыдущих). Функция не должна использовать рекурсию, malloc и выделять больше 128 байт в стеке.

# В массиве char’ов есть только строчные буквы латиницы. Отсортируйте их подсчётом по возрастанию (подсчитав количество вхождений каждой буквы, а затем перезаписав массив). C. Разумеется, оформить в виде функции.

# Чем отличается строгая типизация от нестрогой?

# Как получить адрес четвёртого элемента массива с именем a ? Приведите пример двух языковых конструкций.

# Чему равен sizeof(3L+4)?

# Назовите причины, по которым некоторые строчки защищены от перезаписи в С.

# Какие арифметические операции разрешены с указателями?

# В массиве char’ов есть только цифры. Отсортируйте их на C подсчётом по возрастанию (подсчитав количество вхождений каждой цифры, а затем перезаписав массив). Оформить в виде функции.

# Напишите функцию, которая подсчитает количество слов из более, чем трёх букв в строке. C.

# Как привести данные одного типа к данным другого типа?

# Приведите пример создания указателя и разыменовывания.

# Что такое интернирование строк?

# Можно ли создать структуру и объединение с одинаковыми типовыми именами? Если да, то как их различать?

# Чему равно `b? int* a = 0x10; int* b = a + 10;`

# С: разбейте строку на слова и верните указатель на массив слов, каждое из которых завершено нуль-терминатором. Строку нельзя менять.

# char* a = "4"; Чему равен sizeof(a)?

# Что такое перечисление?

# Объявите тип-указатель на функцию, возвращающую double, которая принимает указатель на функцию, которая возвращает int и принимает float.

# В каком заголовочном файле определён тип unsigned?

# С: разбейте строку на слова и верните указатель на массив слов, каждое из которых завершено нуль-терминатором. Строку нельзя менять.
