# [jplbot](https://github.com/zhmylove/jplbot)

## основной код бота ([jplbot.pl](https://github.com/zhmylove/jplbot/blob/master/src/jplbot.pl))

|строки| код                                |
|------|------------------------------------|
|4 - 19| указываются зависимости от других файлов с помощью use |
|21 - 28| выполняется `config.pl`, результат заносится в `$rc`. Если `config` не распарсился или не вернул результат — выводится ошибка. |
|32 - 57| с помощью `my` объявляются локальные переменные (а с помощью `our` — глобальные). Значения берутся из `config` файла.|
|59 - 68| `store` пишет хэш в файл(и в обратном направлении). Если нет файла saytofile, то туда записывается пустой хэш. Аналогичнос `kick_file` и хэшем `{ zhmylove => 1}` (`=>` используется при инициализации хэшей, отделяя ключ от значения). Далее хэш из `$saytofile` грузится в `%sayto`. Аналогично в `%kicks` грузится `$kick_file`. Далее в консоль выводятся ключи хэшей (при условии, что в хэшах что-то имеется). После создается объект класса `karma` (класс определен в karma.pm), в качестве параметра конструктора передается `config`. После создается объект класса `tome` и у него вызывается метод `read_tome_file` (`->` - разыменование ссылки, т. е. `${$ref}{some}` то же самое, что `$ref->some`. Т.к. объекты в `perl` – хэши, то для доступа к членам класса пишут стрелку).|
|70 - 96| объявляются хэши и инициализируются хэши (`[]` - ссылка на пустой список). Далее инициализируются переменные. После задаются обработчики сигналов(`\&` - создает ссылку на функцию), `srand` инициализирует генератор случайных чисел. |
|||
