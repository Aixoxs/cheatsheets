# Вопросы с SE.IFMO

## Java-сервлеты. Особенности реализации, ключевые методы, преимущества и недостатки относительно CGI и FastCGI.

Пакеты `javax.servlet` и `javax.servlet.http` обеспечивают интерфейсы и классы для создания сервлетов.

__Cервлет__ — это Java-класс, который наследуется обычно от класса `HttpServlet` и переопределяет часть методов:

- `doGet` — если мы хотим, чтобы сервлет реагировал на GET запрос.
- `doPost` — если мы хотим, чтобы сервлет реагировал на POST запрос.
- `doPut`, `doDelete` — если мы хотим, чтобы сервлет реагировал на PUT и DELETE запрос (есть и такие в HTTP). Эти методы реализуются крайне редко, т.к. сами команды тоже очень редко встречаются.
- `init`, `destroy` — для управления ресурсами в момент создания сервлета и в момент его уничтожения.

### Сервлет vs CGI

- Сервлеты запускаются в одном процессе (HTTP-сервер с дополнительными функциями, который называется Serlet Container), и они существуют до тех пор, пока этот процесс существует.
- CGI каждый раз создает новый экземпляр процесса для обслуживания запроса. Это убийца перфоманса.
- Поскольку для каждого запроса существует новый процесс, это означает, что CGI не может агрегировать данные из нескольких запросов в памяти.

### Сервлет vs FastCGI

- При использовании сервлетов веб-сервер может напрямую вызвать приложение.

## Контейнеры сервлетов. Жизненный цикл сервлета.

Жизненный цикл сервлета состоит из следующих шагов:

1. В случае отсутствия сервлета в контейнере.
1.1. Класс сервлета загружается контейнером.
1.2. Контейнер создает экземпляр класса сервлета.
1.3. Контейнер вызывает метод init(). Этот метод инициализирует сервлет и вызывается в первую очередь, до того, как сервлет сможет обслуживать запросы. За весь жизненный цикл метод init() вызывается только один раз.
2. Обслуживание клиентского запроса. Каждый запрос обрабатывается в своем отдельном потоке. Контейнер вызывает метод service() для каждого запроса. Этот метод определяет тип пришедшего запроса и распределяет его в соответствующий этому типу метод для обработки запроса. Разработчик сервлета должен предоставить реализацию для этих методов. Если поступил запрос, метод для которого не реализован, вызывается метод родительского класса и обычно завершается возвращением ошибки инициатору запроса.
3. В случае если контейнеру необходимо удалить сервлет, он вызывает метод destroy(), который снимает сервлет из эксплуатации. Подобно методу init(), этот метод тоже вызывается единожды за весь цикл сервлета.